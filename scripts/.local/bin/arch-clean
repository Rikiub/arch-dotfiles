#!/usr/bin/env sh

SEP_COLOR="31"
TEXT_COLOR="33"

SEP="\e[0;${SEP_COLOR}m"
TEXT="\e[1;${TEXT_COLOR}m"
END="\e[0m"

# this script must be executed on Arch Linux or a distribution with "pacman" package manager.
if command -v pacman >/dev/null 2>&1; then
	:
else
	echo "You aren't on Arch Linux system because 'pacman' is not installed."
	exit 1
fi

echo ''
echo -e "${SEP}======${END} ${TEXT} Sudo Privileges ${END} ${SEP}=====${END}"
echo ''
sudo echo 'Done'

echo ''
echo -e "${SEP}======${END} ${TEXT} Clean (Pacman|Yay) Cache ${END} ${SEP}=====${END}"
if command -v yay >/dev/null 2>&1; then
	echo ''
	echo -e "${TEXT}Cleaning 'yay' cache...${END}"
	echo ''
	yay -Sc --noconfirm
fi
if command -v paru >/dev/null 2>&1; then
	echo ''
	echo -e "${TEXT}Cleaning 'paru' cache...${END}"
	echo ''
	paru -Sc --noconfirm
fi

echo ''
echo -e "${SEP}======${END} ${TEXT} Removing unused packages ${END} ${SEP}=====${END}"
echo ''
pacman -Qtdq | sudo pacman -Rns -              # remove cache
pacman -Qqd  | sudo pacman -Rsu -              # remove optional/circular dependences

echo ''
echo -e "${SEP}======${END} ${TEXT} Optimizations completed ${END} ${SEP}=====${END}"
echo ''
